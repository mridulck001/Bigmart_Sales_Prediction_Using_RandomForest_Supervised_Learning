<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BigMart Sales Prediction</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <i class="fas fa-chart-line header-icon"></i>
                <h1>BigMart Sales Prediction</h1>
                <p>Predict product sales using advanced machine learning</p>
            </div>
        </header>

        <!-- Status Cards -->
        <div class="status-cards">
            <div class="status-card" id="model-status">
                <i class="fas fa-robot"></i>
                <h3>Model Status</h3>
                <p id="status-text">Checking...</p>
            </div>
            <div class="status-card" id="prediction-count">
                <i class="fas fa-calculator"></i>
                <h3>Predictions Made</h3>
                
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Prediction Form -->
            <div class="form-section">
                <h2><i class="fas fa-input-pipe"></i> Product Information</h2>
                
                <form method="POST" action="/predict" id="prediction-form">
                    <div class="form-grid">
                        <!-- Item Details -->
                        <div class="form-group">
                            <label for="Item_Weight">
                                <i class="fas fa-weight-hanging"></i>
                                Item Weight (kg)
                            </label>
                            <input type="number" step="0.1" name="Item_Weight" id="Item_Weight" 
                                   placeholder="e.g., 8.5" min="0">
                            <span class="input-hint">Product weight in kilograms</span>
                        </div>

                        <div class="form-group">
                            <label for="Item_Fat_Content">
                                <i class="fas fa-oil-can"></i>
                                Fat Content *
                            </label>
                            <select name="Item_Fat_Content" id="Item_Fat_Content" required>
                                <option value="">Select Fat Content</option>
                                <option value="Low Fat">Low Fat</option>
                                <option value="Regular">Regular</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="Item_Visibility">
                                <i class="fas fa-eye"></i>
                                Item Visibility
                            </label>
                            <input type="number" step="0.001" name="Item_Visibility" id="Item_Visibility" 
                                   placeholder="e.g., 0.016" min="0" max="1">
                            <span class="input-hint">Visibility percentage (0-1)</span>
                        </div>

                        <div class="form-group">
                            <label for="Item_Type">
                                <i class="fas fa-tags"></i>
                                Item Type *
                            </label>
                            <select name="Item_Type" id="Item_Type" required>
                                <option value="">Select Item Type</option>
                                <option value="Baking Goods">Baking Goods</option>
                                <option value="Breads">Breads</option>
                                <option value="Breakfast">Breakfast</option>
                                <option value="Canned">Canned</option>
                                <option value="Dairy">Dairy</option>
                                <option value="Frozen Foods">Frozen Foods</option>
                                <option value="Fruits and Vegetables">Fruits and Vegetables</option>
                                <option value="Hard Drinks">Hard Drinks</option>
                                <option value="Health and Hygiene">Health and Hygiene</option>
                                <option value="Household">Household</option>
                                <option value="Meat">Meat</option>
                                <option value="Others">Others</option>
                                <option value="Seafood">Seafood</option>
                                <option value="Snack Foods">Snack Foods</option>
                                <option value="Soft Drinks">Soft Drinks</option>
                                <option value="Starchy Foods">Starchy Foods</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="Item_MRP">
                                <i class="fas fa-rupee-sign"></i>
                                Maximum Retail Price (â‚¹) *
                            </label>
                            <input type="number" step="0.01" name="Item_MRP" id="Item_MRP" 
                                   placeholder="e.g., 249.81" min="0" required>
                            <span class="input-hint">Product price in rupees</span>
                        </div>

                        <!-- Outlet Details -->
                        <div class="form-group">
                            <label for="Outlet_Identifier">
                                <i class="fas fa-store"></i>
                                Outlet Identifier
                            </label>
                            <select name="Outlet_Identifier" id="Outlet_Identifier">
                                <option value="">Select Outlet</option>
                                <option value="OUT010">OUT010</option>
                                <option value="OUT013">OUT013</option>
                                <option value="OUT017">OUT017</option>
                                <option value="OUT018">OUT018</option>
                                <option value="OUT019">OUT019</option>
                                <option value="OUT027">OUT027</option>
                                <option value="OUT035">OUT035</option>
                                <option value="OUT045">OUT045</option>
                                <option value="OUT046">OUT046</option>
                                <option value="OUT049">OUT049</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="Outlet_Establishment_Year">
                                <i class="fas fa-calendar-alt"></i>
                                Outlet Establishment Year
                            </label>
                            <input type="number" name="Outlet_Establishment_Year" id="Outlet_Establishment_Year" 
                                   placeholder="e.g., 1999" min="1985" max="2020">
                            <span class="input-hint">Year when outlet was established</span>
                        </div>

                        <div class="form-group">
                            <label for="Outlet_Size">
                                <i class="fas fa-expand-arrows-alt"></i>
                                Outlet Size
                            </label>
                            <select name="Outlet_Size" id="Outlet_Size">
                                <option value="">Select Outlet Size</option>
                                <option value="Small">Small</option>
                                <option value="Medium">Medium</option>
                                <option value="High">High</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="Outlet_Location_Type">
                                <i class="fas fa-map-marker-alt"></i>
                                Location Type
                            </label>
                            <select name="Outlet_Location_Type" id="Outlet_Location_Type">
                                <option value="">Select Location Type</option>
                                <option value="Tier 1">Tier 1</option>
                                <option value="Tier 2">Tier 2</option>
                                <option value="Tier 3">Tier 3</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="Outlet_Type">
                                <i class="fas fa-building"></i>
                                Outlet Type *
                            </label>
                            <select name="Outlet_Type" id="Outlet_Type" required>
                                <option value="">Select Outlet Type</option>
                                <option value="Grocery Store">Grocery Store</option>
                                <option value="Supermarket Type1">Supermarket Type1</option>
                                <option value="Supermarket Type2">Supermarket Type2</option>
                                <option value="Supermarket Type3">Supermarket Type3</option>
                            </select>
                        </div>
                    </div>

                    <!-- Options -->
                    <div class="form-options">
                        <label class="checkbox-container">
                            <input type="checkbox" name="save_result">
                            <span class="checkmark"></span>
                            Save prediction result to file
                        </label>
                    </div>

                    <!-- Submit Button -->
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary" id="predict-btn">
                            <i class="fas fa-magic"></i>
                            Predict Sales
                        </button>
                        <button type="button" class="btn btn-secondary" id="clear-btn">
                            <i class="fas fa-broom"></i>
                            Clear Form
                        </button>
                        <button type="button" class="btn btn-info" id="sample-btn">
                            <i class="fas fa-flask"></i>
                            Load Sample Data
                        </button>
                    </div>
                </form>
            </div>

            <!-- Results Section -->
            <div class="results-section">
                <h2><i class="fas fa-chart-bar"></i> Prediction Results</h2>
                
                <div class="result-card" id="result-card">
                    {% if prediction_text %}
                        {% if success %}
                            <div class="result-success">
                                <i class="fas fa-check-circle"></i>
                                <h3>Prediction Complete!</h3>
                                <p class="prediction-value">{{ prediction_text }}</p>
                            </div>
                        {% elif error %}
                            <div class="result-error">
                                <i class="fas fa-exclamation-triangle"></i>
                                <h3>Prediction Error</h3>
                                <p class="error-message">{{ prediction_text }}</p>
                            </div>
                        {% else %}
                            <div class="result-info">
                                <i class="fas fa-info-circle"></i>
                                <p>{{ prediction_text }}</p>
                            </div>
                        {% endif %}
                    {% else %}
                        <div class="result-placeholder">
                            <i class="fas fa-chart-line"></i>
                            <p>Enter product details and click "Predict Sales" to see the prediction</p>
                        </div>
                    {% endif %}
                </div>

                <!-- Sample Predictions -->
                <div class="sample-predictions" id="sample-predictions">
                    <h3><i class="fas fa-vial"></i> Test Sample Predictions</h3>
                    <div class="sample-grid">
                        <div class="sample-card" onclick="loadSampleData(1)">
                            <h4>High-end Dairy</h4>
                            <p>Premium dairy product in Tier 1 location</p>
                            <span class="sample-prediction">Click to load</span>
                        </div>
                        <div class="sample-card" onclick="loadSampleData(2)">
                            <h4>Budget Snack Food</h4>
                            <p>Affordable snack in Tier 2 location</p>
                            <span class="sample-prediction">Click to load</span>
                        </div>
                        <div class="sample-card" onclick="loadSampleData(3)">
                            <h4>Household Product</h4>
                            <p>Household item in Tier 3 location</p>
                            <span class="sample-prediction">Click to load</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2025 BigMart Sales Prediction System. Powered by Machine Learning.</p>
            <div class="footer-links">
                <a href="/health" target="_blank"><i class="fas fa-heartbeat"></i> Health Check</a>
                <a href="/test_prediction" target="_blank"><i class="fas fa-test-tube"></i> API Test</a>
            </div>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-cog fa-spin"></i>
            <p>Making Prediction...</p>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
